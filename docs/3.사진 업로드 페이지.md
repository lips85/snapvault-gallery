
# 사진 업로드 페이지 기능 명세서

## 1. 개요
사진 업로드 페이지는 사용자가 사진 파일을 시스템에 업로드하고, 메타데이터를 추가하여 체계적으로 저장할 수 있는 기능을 제공합니다.

---

## 2. 프론트엔드 명세

**기능** | **상세 설명**
--- | ---
**사진 업로드 폼** | - 사진 파일 드래그 앤 드롭 또는 파일 탐색기 선택 지원.<br>- 여러 파일 동시 업로드 기능 지원.<br>- 업로드 가능한 파일 형식 제한 (JPEG, PNG).<br>- 파일 크기 제한 (최대 10MB).
**메타데이터 입력** | - 필수 필드: 현장명, 점검일자, 점검위치.<br>- 선택 필드: 공정, 세부내용, 태그.<br>- 커스텀 메타데이터 입력 지원 (조직별 필드 정의 가능).
**업로드 상태 표시** | 파일 업로드 진행 상태를 표시하는 진행 바.
**에러 처리** | 파일 크기 초과, 지원되지 않는 형식 등 에러 메시지 표시.
**미리보기** | 업로드된 사진의 썸네일 미리보기 제공.
**다크 모드 지원** | Tailwind CSS 기반으로 테마 전환.

---

## 3. 백엔드 명세

**기능** | **상세 설명**
--- | ---
**파일 업로드 API** | `/api/photos/upload`<br>- **메서드**: POST<br>- **요청 데이터**: Multipart form-data 형식으로 파일 및 메타데이터 전송.<br>- **응답**: 업로드 성공 여부 및 저장된 파일 경로 반환.
**메타데이터 저장** | 업로드된 파일의 메타데이터를 Supabase 데이터베이스에 저장.
**유효성 검증** | - 파일 형식 및 크기 확인.<br>- 필수 메타데이터 입력 확인.
**중복 파일 확인** | 파일 해시를 기반으로 중복 업로드 방지.
**업로드 실패 처리** | 네트워크 오류 또는 서버 오류 시 재시도 로직 제공.

---

## 4. 기술 요구사항

**프론트엔드**
- React + Next.js로 구현.
- Tailwind CSS로 스타일링.
- React Hook Form으로 폼 관리 및 유효성 검증.

**백엔드**
- Supabase Storage를 활용하여 파일 저장.
- 데이터베이스에 파일 경로 및 메타데이터 저장.

**보안**
- 사용자 인증 확인 (JWT 토큰 기반).
- 업로드된 파일의 악성 코드 탐지를 위한 기본 검사.

---

## 5. 사용자 흐름
1. 사용자가 페이지에 접속하여 사진을 드래그 앤 드롭으로 업로드한다.
2. 필수 메타데이터를 입력하고 확인 버튼을 클릭한다.
3. 업로드가 완료되면 갤러리 페이지로 리다이렉트된다.

